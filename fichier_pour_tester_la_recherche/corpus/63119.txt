 A module for generating test case templates This module incorporates code from the English Wikipedia s Testcase table module written by Frietjes with contributions by Mr Stradivarius and Jackmcbarn and the English Wikipedia s Testcase rows module written by Mr Stradivarius The Testcase table and Testcase rows modules are released under the CC BY SA License and the GFDL License CC BY SA and the GFDL Author Mr Stradivarius Load required moduleslocal yesno require Set constantslocal DATA MODULE Module Template test case data Shared methods local function message	 This method is added to classes that need to deal with messages from the	 config module 	local msg self cfg msg key 	if select then		return mw message newRawMessage	else		return msg	endend Template class local Template Template memoizedMethods 	 Names of methods to be memoized in each object This table should only	 hold methods with no parameters 	getFullPage true 	getName true 	makeHeader true 	getOutput true function Template new	local obj 	 Set input	for k v in pairs do		if not Template k then			obj k v		end	end	obj invocation invocationObj	 Validate input	if not obj template and not obj title then		error	end	 Memoize expensive method calls	local memoFuncs 	return setmetatable obj 		 index function 			if Template memoizedMethods key then				local func memoFuncs key 				if not func then					local val Template key 					func function return val end					memoFuncs key func				end				return func			else				return Template key 			end		end	 endfunction Template getFullPage	if self template then		local strippedTemplate hasColon self template gsub		hasColon hasColon 		local ns strippedTemplate match		ns ns and mw site namespaces ns 		if ns then			return strippedTemplate		elseif hasColon then			return strippedTemplate Main namespace		else			return mw site namespaces name strippedTemplate		end	else		return self title prefixedText	endendfunction Template getName	if self template then		return self template	else		return require	endendfunction Template makeLink	if display then		return string format	else		return string format	endendfunction Template makeBraceLink	display display or self getName	local link self makeLink	return mw text nowikiendfunction Template makeHeader	return self heading or self makeBraceLinkendfunction Template getInvocation	local invocation self invocation getInvocation 		template self getName 		requireMagicWord self requireMagicWord 	 	if format 