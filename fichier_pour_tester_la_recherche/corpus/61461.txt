 This module is intended to provide access to basic string functions Most of the functions provided here can be invoked with named parameters unnamed parameters or a mixture If named parameters are used Mediawiki will automatically remove any leading or trailing whitespace from the parameter Depending on the intended use it may be advantageous to either preserve orremove such whitespace Global options ignore errors If set to true or any error condition will result in an empty string being returned rather than an error message error category If an error occurs specifies the name of a category to include with the error message The default category is no category If set to true or no category will be added if an error is generated Unit tests for this module are available at Module String tests local str len This function returns the length of the target string Usage OR Parameters s The string whose length to report If invoked using named parameters Mediawiki will automatically remove any leading ortrailing whitespace from the target string function str len local new args str getParameters local s new args s or return mw ustring lenend sub This function returns a substring of the target string at specified indices Usage OR Parameters s The string to return a subset of i The fist index of the substring to return defaults to j The last index of the string to return defaults to the last character The first character of the string is assigned an index of If either i or jis a negative value it is interpreted the same as selecting a character by counting from the end of the string Hence a value of is the same as selecting the last character of the string If the requested indices are out of range for the given string an error is reported function str sub local new args str getParameters local s new args s or local i tonumber or local j tonumber or local len mw ustring len Convert negatives for range checking if i then i len i end if j then j len j end if i len or j len or i or j then return str error end if j i then return str error end return mw ustring subend This function implements that features of and is kept in orderto maintain these older templates function str sublength local i tonumber or local len tonumber return mw ustring subend match This function returns a substring from the source string that matches a specified pattern Usage OR invoke String pos s source string pattern pattern string start start index match match number plain plain flag nomatch nomatch output Parameters s The string to search pattern The pattern or string to find within the string start The index within the source string to start the search The first character of the string has index Defaults to match In some cases it may be possible to make multiple matches on a single string This specifies which match to return where the first match is match If a negative number is specified then a match is returned counting from the last match Hence match is the same as requesting the last match Defaults to plain A flag indicating that the pattern should be understood as plain text Defaults to false nomatch If no match is found output the nomatch value rather than an error If invoked using named parameters Mediawiki will automatically remove any leading ortrailing whitespace from each string In some circumstances this is desirable in other cases one may want to preserve the whitespace If the match number or start index are out of range for the string being queried thenthis function generates an error An error is also generated if no match is found If one adds the parameter ignore errors true then the error will be suppressed and an empty string will be returned on any failure For information on constructing Lua patterns a form of regular expression see function str match local new args str getParameters local s new args s or local start tonumber or local plain flag str getBoolean local pattern new args pattern or local match index math floor local nomatch new args nomatch if s 