 This module implements Get required modules local getArgs require getArgslocal messageBox require Get the config table local cfg mw loadDatalocal p Often used functions local ugsub mw ustring gsub Helper functions These are defined as local functions but are made available in the p table for testing purposes local function message	 	 Gets a message from the cfg table and formats it if appropriate 	 The function raises an error if the value from the cfg table is not	 of the type expectType The default type for expectType is string 	 If the table valArray is present strings such as etc in the	 message are substituted with values from the table keys etc 	 For example if the message foo message had the value Foo bar 	 message would return Foo qux bar baz 	 	local msg cfg cfgKey 	expectType expectType or string 	if type expectType then		error	end	if not valArray then		return msg	end	local function getMessageVal		match tonumber		return valArray match or error	end	local ret ugsub	return retendp message messagelocal function makeWikilink	if display then		return mw ustring format	else		return mw ustring format	endendp makeWikilink makeWikilinklocal function makeCategoryLink	local catns mw site namespaces name	return makeWikilinkendp makeCategoryLink makeCategoryLinklocal function makeUrlLink	return mw ustring formatendp makeUrlLink makeUrlLinklocal function makeToolbar	local ret 	local lim select	if lim then		return nil	end	for i lim do		ret ret select	end	return end	p makeToolbar makeToolbar Argument processing local function makeInvokeFunc	return function 		local args getArgs frame 			valueFunc function 				if type 