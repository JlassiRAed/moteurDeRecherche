 Twinkle diff function twinklediff 	if 		return 	 	var query 		 title mw config get 		 diff cur 		 oldid prev 	 	Twinkle addPortletLink 	 Show additional tabs only on diff pages	if 		Twinkle addPortletLink 		Twinkle addPortletLink 		var oldid oldid 		query 			 title mw config get 			 diff cur 			 oldid oldid		 		Twinkle addPortletLink 	 Twinkle diff evaluate function twinklediffEvaluate 	var user 	if 		user mw config get 	 else 		var node document getElementById 		if 			 nothing to do 			return 		 		user 	 	var query 		 prop revisions 		 action query 		 titles mw config get 		 rvlimit 		 rvprop ids user 		 rvstartid mw config get i e not the current one		 rvuser user	 	Morebits status init 	var wikipedia api new Morebits wiki api 	wikipedia api params user user 	wikipedia api post Twinkle diff callbacks 	main function 		var xmlDoc self responseXML 		var revid 		if 			self statelem error 			return 		 		var query 			 title mw config get 			 oldid revid 			 diff mw config get		 		window location mw util wikiScript 	 nowiki